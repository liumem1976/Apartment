摘要：

- 在 `app/models/domain.py` 中修复 `assert_no_lease_overlap` 的边界行为并添加边界测试（已通过本地测试）。
- 新增 Alembic 迁移以为 `meter(unit_id, kind, slot)` 添加唯一索引。
- 添加多项测试（`tests/test_lease_overlap_extra.py`），本地 `pytest` 报告 20 passed。
- 在本地运行了 `alembic upgrade head` 并对 `./data/app.db` 执行 `scripts/check_duplicate_meters.py`（输出 `NO_DUPLICATES`）。

建议审查点：

- 在生产环境应用迁移前，请先在生产副本上运行 `python scripts/check_duplicate_meters.py <path_to_prod_db>`，确保没有重复 `meter`。若发现重复，需要先准备并测试 fix-up migration 来清理重复数据。 
- 迁移窗口：建议在低流量时段进行，并确保有完整数据库备份与恢复步骤。

测试/验证：

- 本地：`pytest` -> 20 passed, `alembic upgrade head` 成功，`scripts/check_duplicate_meters.py ./data/app.db` -> NO_DUPLICATES。

合并建议：

- 先进行代码审查与 CI 通过后，再合并到 `main` 并按文档步骤在生产副本上执行迁移检查。